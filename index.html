<!DOCTYPE html>
<html>
  <head>
    <title>拯救北極熊起始版圖設置產生器 Rescue Polar Bears Setup Generator</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1, minimal-ui">
    <link rel="stylesheet" type="text/css" href="reset.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  </head>
  <body>
    <button name="button" id="generator" onclick="generator();">重新產生 (regenerate)</button><br>
    <a href="http://2plus.com.tw/product/z613-rescue-polar-bears/" id="official-link" target="_blank">拯救北極熊官網<br>(official link)</a>
    <div id="container">
      <section id="sect1">
        <div class="hex" id="grid1"></div>
        <div class="hex" id="grid2"></div>
        <div class="hex" id="grid3"></div>
        <div class="hex" id="grid4"></div>
      </section>
      <section id="sect2">
        <div class="hex" id="grid5"></div>
        <div class="hex" id="grid6"></div>
        <div class="hex" id="grid7"></div>
        <div class="hex" id="grid8"></div>
        <div class="hex" id="grid9"></div>
      </section>
      <section id="sect3">
        <div class="hex" id="grid10"></div>
        <div class="hex" id="grid11"></div>
        <div class="hex" id="grid12"></div>
        <div class="hex" id="grid13"></div>
        <div class="hex" id="grid14"></div>
        <div class="hex" id="grid15"></div>
      </section>
      <section id="sect4">
        <div class="hex" id="grid16"></div>
        <div class="hex" id="grid17"></div>
        <div class="hex" id="grid18"></div>
        <div class="hex" id="grid19"></div>
        <div class="hex" id="grid20"></div>
        <div class="hex" id="grid21"></div>
        <div class="hex" id="grid22"></div>
      </section>
      <section id="sect5">
        <div class="hex" id="grid23"></div>
        <div class="hex" id="grid24"></div>
        <div class="hex" id="grid25"></div>
        <div class="hex" id="grid26"></div>
        <div class="hex" id="grid27"></div>
        <div class="hex" id="grid28"></div>
      </section>
      <section id="sect6">
        <div class="hex" id="grid29"></div>
        <div class="hex" id="grid30"></div>
        <div class="hex" id="grid31"></div>
        <div class="hex" id="grid32"></div>
        <div class="hex" id="grid33"></div>
      </section>
      <section id="sect7">
        <div class="hex" id="grid34"></div>
        <div class="hex" id="grid35"></div>
        <div class="hex" id="grid36"></div>
        <div class="hex" id="grid37"></div>
      </section>
    </div>

    <script type="text/javascript">
      function generator() {
        var hexes = _shuffleHexes(), i = 0, webHeight = -110.55, mobileHeight = -11.625;
        hexes.forEach(function(hex, index) {
          index += 1;
          if (window.innerWidth > 981) {
            $('#grid'+index).css('background-position-y', webHeight * (hex-1) + 'px');
          } else {
            $('#grid'+index).css('background-position-y', mobileHeight * (hex-1) + 'vw');
          }
        });
      }

      function _shuffleHexes() {
        // 21 is support, 22 is empty
        var hexes = [
          3,
          2,
          1,
          10,
          13,
          8,
          12,
          9,
          15,
          11,
          6,
          14,
          7,
          5,
          4,
          20,
          19,
          18,
          16,
          17,
          22,
          22,
          22,
          22,
          22,
          22,
          22,
          22,
          22,
          22,
          22,
          22,
          21,
          21,
          21,
          21,
          21
        ];

        // http://stackoverflow.com/a/6274398
        var counter = 37, temp, index;
        while (counter > 0) {
          index = Math.floor(Math.random() * counter);
          counter--;
          temp = hexes[counter];
          hexes[counter] = hexes[index];
          hexes[index] = temp;
        }
        return hexes;
      }

      generator();
    </script>
  </body>
</html>
